<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QFSL Seller Compliance Intake</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

<header>
  <div class="nav">
    <div class="logo">QUINTRIN</div>
  </div>
</header>

<main class="container">

<!-- ================= QFSL INTERNAL HEADER (AUTO GENERATED BY QUINTRIN) ================= -->
<section class="internal-qfsl">
  <h1>QFSL Compliance Intake</h1>

  <label>Ref: Document Number</label>
  <input name="document_ref" id="documentRef" readonly />

  <label>Date</label>
  <input type="date" name="document_date" id="docDate" readonly />

  <label>Board Resolution Number</label>
  <input name="board_resolution" id="boardRes" readonly />
</section>

<!-- ================= SECTION 1 ================= -->
<section>
  <h2>1. Seller Entity Identification</h2>

  <label>Entity Type</label>
  <select name="entity_type">
    <option>Individual</option>
    <option>Company</option>
    <option>Trust</option>
    <option>Joint Venture</option>
    <option>Government / State Entity</option>
  </select>

  <label>Legal Name of Seller Entity</label>
  <input name="legal_name" required />

  <label>Registered Address</label>
  <input name="registered_address" />

  <label>Operating Address</label>
  <input name="operating_address" />

  <label>Country of Incorporation / Residence</label>
  <input name="country" />

  <label>Registration Number / National ID</label>
  <input name="registration_number" />

  <label>Tax Identification Number (TIN)</label>
  <input name="tin" />

  <label>Authorized Representative Name</label>
  <input name="rep_name" />

  <label>Position / Title</label>
  <input name="rep_title" />

  <label>Email</label>
  <input type="email" name="rep_email" />

  <label>Phone / WhatsApp</label>
  <input name="rep_phone" />

  <label>Age of Operating Bank Account(s)</label>
  <input name="bank_age" />

  <label>General Account Capacity & Operating Profile</label>
  <textarea name="bank_profile"></textarea>
</section>

<!-- ================= SECTION 2 ================= -->
<section>
  <h2>2. Business Classification</h2>

  <label>Type of Company</label>
  <div class="checkbox-grid">
    <label><input type="checkbox" value="Real Estate"> Real Estate</label>
    <label><input type="checkbox" value="Hardware"> Hardware</label>
    <label><input type="checkbox" value="Insurance"> Insurance</label>
    <label><input type="checkbox" value="Land Development"> Land Development</label>
    <label><input type="checkbox" value="Energy"> Energy / Minerals</label>
    <label><input type="checkbox" value="Oil & Gas"> Oil & Gas</label>
    <label><input type="checkbox" value="Security"> Security</label>
    <label><input type="checkbox" value="Agriculture"> Agriculture</label>
    <label><input type="checkbox" value="Other"> Other</label>
  </div>

  <label>Business Description</label>
  <textarea name="business_scope"></textarea>

  <label>Jurisdictions of Operation</label>
  <input name="jurisdictions" />

  <label>Expected Transaction Value (USD)</label>
  <input type="number" name="transaction_value" />

  <label>Encumbered?</label>
  <select name="encumbered">
    <option>No</option>
    <option>Yes</option>
  </select>

  <label>Encumbrance Details</label>
  <textarea name="encumbrance_details"></textarea>
</section>

<!-- ================= SECTION 3 ================= -->
<section>
  <h2>3. Beneficial Ownership</h2>

  <label>Ultimate Beneficial Owner (UBO)</label>
  <input name="ubo_name" />

  <label>Nationality</label>
  <input name="ubo_nationality" />

  <label>Control Type</label>
  <select name="ubo_control_type">
    <option>Direct</option>
    <option>Indirect</option>
    <option>Trust</option>
    <option>Nominee</option>
  </select>

  <label>Politically Exposed Person (PEP)</label>
  <select name="pep_status">
    <option>No</option>
    <option>Yes</option>
  </select>

  <label>PEP Details</label>
  <textarea name="pep_details"></textarea>
</section>

<!-- ================= SECTION 4 ================= -->
<section>
  <h2>4. Compliance Declarations</h2>

  <label>Source of Funds</label>
  <textarea name="source_of_funds"></textarea>

  <label>Source of Wealth</label>
  <textarea name="source_of_wealth"></textarea>

  <label><input type="checkbox"> Not subject to sanctions</label>
  <label><input type="checkbox"> No litigation</label>
  <label><input type="checkbox"> No undisclosed third parties</label>
</section>

<!-- ================= SECTION 5 ================= -->
<section>
  <h2>5. Document Uploads</h2>

  <label>Certificate of Incorporation</label>
  <input type="file" />

  <label>Government ID</label>
  <input type="file" />

  <label>Shareholder Register</label>
  <input type="file" />

  <label>Proof of Address</label>
  <input type="file" />
</section>

<button class="cta">Submit Compliance Intake</button>

<!-- ================= INVESTOR PRIVATE PANEL (HIDDEN) ================= -->
<section id="investorSection" class="investor-panel">
  <h2>Investor Decision Panel</h2>

  <label>Deal Ref Number</label>
  <input id="dealRef" readonly />

  <label>Investor Notes</label>
  <textarea id="note"></textarea>

  <button onclick="submitDecision('Approved')">Approve</button>
  <button onclick="submitDecision('Rejected')">Reject</button>
  <button onclick="submitDecision('Clarification Required')">Clarify</button>
</section>

<button class="investor-btn" onclick="unlockInvestor()">Investor Access</button>

</main>

<footer>
  <p>Quintrin provides independent data structuring services only.</p>
</footer>

<script>
/* AUTO LOAD REF ID */
fetch("https://script.google.com/macros/s/AKfycbwMqFyO3pVZbvOfhSt1DMUObfHAeyqNBxTlLZjXOMdqJo6xc8DzILMec_YVjrXbjo8/exec")
.then(r => r.text())
.then(ref => {
  document.getElementById("documentRef").value = ref;
  document.getElementById("dealRef").value = ref;
});

/* Auto Date */
document.getElementById("docDate").value = new Date().toISOString().split('T')[0];

/* Investor Unlock */
const PIN = "4821";
function unlockInvestor() {
  const pin = prompt("Enter Investor PIN");
  if (pin === PIN) {
    document.getElementById("investorSection").style.display = "block";
    alert("Investor Panel Unlocked");
  } else {
    alert("Invalid PIN");
  }

  const INTAKE_URL = "https://script.google.com/macros/s/AKfycbwMqFyO3pVZbvOfhSt1DMUObfHAeyqNBxTlLZjXOMdqJo6xc8DzILMec_YVjrXbjo8/exec";

function submitIntake() {

  const data = {
    documentRef: document.getElementById("documentRef").value,
    dealRef: document.getElementById("dealRef").value,
    sellerName: document.getElementById("sellerName").value,
    sellerEmail: document.getElementById("sellerEmail").value,
    assetType: document.getElementById("assetType").value,
    assetValue: document.getElementById("assetValue").value
  };

  fetch(INTAKE_URL, {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(res => res.text())
  .then(r => {
    alert("Submission Logged Successfully. Reference ID: " + data.documentRef);
  })
  .catch(err => {
    alert("Submission Failed");
    console.error(err);
  });

    }
  
/* Submit Intake */
function submitIntake() {
  const payload = {
    legal_name: document.querySelector("[name='legal_name']").value,
    country: document.querySelector("[name='country']").value,
    registration_number: document.querySelector("[name='registration_number']").value,
    tin: document.querySelector("[name='tin']").value,
    rep_name: document.querySelector("[name='rep_name']").value,
    rep_email: document.querySelector("[name='rep_email']").value,
    transaction_value: document.querySelector("[name='transaction_value']").value,
    source_of_funds: document.querySelector("[name='source_of_funds']").value,
    source_of_wealth: document.querySelector("[name='source_of_wealth']").value,
    notes: "Seller Intake Submission"
  };

  fetch("https://script.google.com/macros/s/AKfycbwMqFyO3pVZbvOfhSt1DMUObfHAeyqNBxTlLZjXOMdqJo6xc8DzILMec_YVjrXbjo8/exec", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify(payload)
  })
  .then(()=>alert("Submission received by Quintrin"))
  .catch(err=>alert("Error: " + err));
}

/* Investor Decision */
function submitDecision(status) {
  const notes = document.getElementById("note").value;
  const ref = document.getElementById("documentRef").value;

  fetch("https://script.google.com/macros/s/AKfycbwMqFyO3pVZbvOfhSt1DMUObfHAeyqNBxTlLZjXOMdqJo6xc8DzILMec_YVjrXbjo8/exec", {
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({
      ref: ref,
      status: status,
      notes: notes,
      code: "Verified"
    })
  })
  .then(()=>alert("Decision submitted"))
  .catch(err=>alert("Error: " + err));
}
</script>

</body>
    </html>
