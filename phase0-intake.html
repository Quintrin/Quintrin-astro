<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>QFSL Compliance Intake</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://quintrin.github.io/Quintrin-astro/styles.css">
</head>

<body>

<header>
<div class="nav">
<div class="logo">QUINTRIN</div>
</div>
</header>

<main class="container">

<!-- HEADER -->
<section>
<h1>QFSL Compliance Intake</h1>

<label>Document Ref</label>
<input id="documentRef" readonly>

<label>Date</label>
<input id="docDate" type="date" readonly>
</section>

<!-- SECTION 1 -->
<section>
<h2>1. Seller Entity Identification</h2>

<label>Entity Type</label>
<select name="entity_type">
<option>Individual</option>
<option>Company</option>
<option>Trust</option>
<option>Joint Venture</option>
<option>Government Entity</option>
</select>

<label for="legal_name">Legal Name</label>
<input id="legal_name" name="legal_name" autocomplete="name">

<label for="country">Country</label>
<input id="country" name="country" autocomplete="country">

<label for="rep_email">Email</label>
<input id="rep_email" name="rep_email" type="email" autocomplete="email">

<label for="rep_phone">Phone</label>
<input id="rep_phone" name="rep_phone" autocomplete="tel">

<label for="tin">Tax Identification Number</label>
<input id="tin" name="tin" autocomplete="off">

<label>TIN</label>
<input name="tin">

<label>Representative Name</label>
<input name="rep_name">

<label>Representative Title</label>
<input name="rep_title">

<label>Email</label>
<input name="rep_email">

<label>Phone</label>
<input name="rep_phone">

<label>Bank Account Age</label>
<input name="bank_age">

<label>Bank Operating Profile</label>
<textarea name="bank_profile"></textarea>
</section>

<!-- SECTION 2 -->
<section>
<h2>2. Business Classification</h2>

<div class="checkbox-grid">
<label><input type="checkbox" name="business_type" value="Real Estate"> Real Estate</label>
<label><input type="checkbox" name="business_type" value="Energy"> Energy</label>
<label><input type="checkbox" name="business_type" value="Oil & Gas"> Oil & Gas</label>
<label><input type="checkbox" name="business_type" value="Agriculture"> Agriculture</label>
<label><input type="checkbox" name="business_type" value="Insurance"> Insurance</label>
<label><input type="checkbox" name="business_type" value="Security"> Security</label>
<label><input type="checkbox" name="business_type" value="Hardware"> Hardware</label>
<label><input type="checkbox" name="business_type" value="Land Development"> Land Development</label>
<label><input type="checkbox" name="business_type" value="Other"> Other</label>
</div>

<label>Business Description</label>
<textarea name="business_scope"></textarea>

<label>Jurisdictions of Operation</label>
<input name="jurisdictions">

<label>Transaction Value (USD)</label>
<input name="transaction_value">

<label>Encumbered?</label>
<select name="encumbered">
<option>No</option>
<option>Yes</option>
</select>

<label>Encumbrance Details</label>
<textarea name="encumbrance_details"></textarea>
</section>

<!-- SECTION 3 -->
<section>
<h2>3. Beneficial Ownership</h2>

<label>Ultimate Beneficial Owner</label>
<input name="ubo_name">

<label>UBO Nationality</label>
<input name="ubo_nationality">

<label>Control Type</label>
<select name="ubo_control_type">
<option>Direct</option>
<option>Indirect</option>
<option>Trust</option>
<option>Nominee</option>
</select>

<label>Politically Exposed Person (PEP)</label>
<select name="pep_status">
<option>No</option>
<option>Yes</option>
</select>

<label>PEP Details</label>
<textarea name="pep_details"></textarea>
</section>

<!-- SECTION 4 -->
<section>
<h2>4. Compliance Declarations</h2>

<label>Source of Funds</label>
<textarea name="source_of_funds"></textarea>

<label>Source of Wealth</label>
<textarea name="source_of_wealth"></textarea>

<label><input type="checkbox" name="sanctions"> Not sanctioned</label>
<label><input type="checkbox" name="litigation"> No litigation</label>
<label><input type="checkbox" name="thirdparty"> No undisclosed third parties</label>
</section>

<!-- SECTION 5 -->
<section>
<h2>5. Document Uploads</h2>

<label>Certificate of Incorporation</label>
<input type="file" name="doc_coi">

<label>Government ID</label>
<input type="file" name="doc_id">

<label>Shareholder Register</label>
<input type="file" name="doc_shareholders">

<label>Proof of Address</label>
<input type="file" name="doc_address">
</section>

<button type="button" class="cta" onclick="submitIntake()">Submit Compliance Intake</button>  

<!-- INVESTOR PANEL -->
<section id="investorSection" class="investor-panel">
<h2>Investor Panel</h2>

<label>Deal Ref</label>
<input id="dealRef" readonly>

<label>Investor Notes</label>
<textarea id="note"></textarea>

<button onclick="submitDecision('Approved')">Approve</button>
<button onclick="submitDecision('Rejected')">Reject</button>
<button onclick="submitDecision('Clarification Required')">Clarify</button>
</section>

<button class="investor-btn" onclick="unlockInvestor()">Investor Access</button>

</main>

<footer>
<p>Quintrin Independent Structuring Platform</p>
</footer>

<script>
const API="https://script.google.com/macros/s/AKfycbzPp1BTZtvFpOAqwgyak01dI1CLs4VQV-1Xm1xvcdS0wFiqBEpNXtqMrzLwSLKpjVw/exec";

/* LOAD REF + DATE */
window.onload=()=>{
fetch(API).then(r=>r.text()).then(ref=>{
document.getElementById("documentRef").value=ref;
document.getElementById("dealRef").value=ref;
});
document.getElementById("docDate").value=new Date().toISOString().split("T")[0];
};

/* INVESTOR LOCK */
const PIN="4821";
function unlockInvestor(){
const p=prompt("Investor PIN");
if(p===PIN) document.getElementById("investorSection").style.display="block";
}

/* SELLER SUBMIT */
function submitIntake(){
const businessTypes = [...document.querySelectorAll("input[name='business_type']:checked")]
  .map(el => el.value);  
const payload={business_type: businessTypes,
documentRef:document.getElementById("documentRef").value,
dealRef:document.getElementById("dealRef").value,
legal_name:document.querySelector("[name='legal_name']").value,
country:document.querySelector("[name='country']").value,
transaction_value:document.querySelector("[name='transaction_value']").value,
source_of_funds:document.querySelector("[name='source_of_funds']").value,
source_of_wealth:document.querySelector("[name='source_of_wealth']").value
};

fetch(API, {
  method: "POST",
  mode: "no-cors",
  headers: {"Content-Type":"application/json"},
  body: JSON.stringify(payload)
})
.then(()=>alert("Submitted to Quintrin"))
.catch(e=>alert("Error "+e));

/* INVESTOR DECISION */
function submitDecision(status){
fetch(API,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({
ref:document.getElementById("documentRef").value,
status:status,
notes:document.getElementById("note").value,
code:"Verified"
})
}).then(()=>alert("Decision Logged"));
}
</script>

</body>
</html>
